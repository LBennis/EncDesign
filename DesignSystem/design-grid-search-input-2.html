<!DOCTYPE html>
<html lang="en" id="backgrounds" class="theme-a">
<head>
  <meta charset="UTF-8">
  <meta name="Encompaas PoC" content="">
  <meta name="keywords" content="HTML,CSS,XML,JavaScript">
  <meta name="author" content="Luke Bennis">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Encompaas PoC - Grid Search Input 2</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>   
                

<style>

  @import url(../primitives.css);
  @import url(../styles.css);
  @import url(../component-styles.css);

  html
  {
    background: #F4F6FB;
    height: 100%;
    width: 100%;
    overflow: hidden;
  }


  body
  {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
    height: 100%;
    width: 100%;
    padding-inline: var(--size-4);
    padding-top: var(--size-4);
    z-index: -3;
  }

  .app-content-wrapper
  {
    padding-bottom: 0;
  }

  .grid-wrapper
  {
    display: flex;
    flex-direction: column;
    width: 100%;
    border: 1px solid var(--bley-opaque-30);
    min-height: 100%;
    border-radius: var(--radius-md) var(--radius-md) 0 0;
  }

  .grid-header
  {
    display: flex;
    flex-direction: column;
    width: 100%;
    background: var(--bley-opaque-5);
    
  }

  .grid-toolbar
  {
    display: flex;
    flex-direction: row;
    width: 100%;
    width: 100%;
    padding: var(--size-1);

    & .left, .right
    {
      display: flex;
      flex-direction: row;
      gap: var(--size-1);
      justify-content: center;
      align-items: center;
      flex-grow: 1;
    }

    & .left
    {
      justify-content: flex-start;
    }

    & .right
    {
      justify-content: flex-end;
    }
  }

  .grid-header-columns
  {
    display: flex;
    flex-direction: row;
    justify-content: space-evenly;
    padding: var(--size-0-5);
  }

  .grid-cells
  {
    min-height: 100%;
    flex-grow: 1;
    background: white;
    padding: 2vw;
  }

  .input-wrapper
  {
    display: flex;
    flex-direction: row;
    gap: var(--size-1);
    align-items: center;
    padding: 0 var(--size-1);
    overflow: hidden;
    position: relative;

    /*styles*/
    background: white;
    border-radius: var(--radius-md);
    border: 1px solid var(--bley-opaque-30);

    &:hover
    {
      border-color: var(--aqua-500);
    }

    &:focus-within
    {
      border-color: var(--primary);
    }


    & svg
    {
      --size: 20px;
      width: var(--size);
      height: var(--size);
      fill: var(--navy-900);
    }

    & input, input:focus-visible
    {
      width: 100%;
      border: none;
      background: transparent;
      outline: none;
      padding-inline: 0;
    }
  }

  .info-btn-wrapper
  {
    position: relative;
  }

  .tooltip-wrapper
  {
    position: absolute;
    transform: translate(-50%, -50%);
    bottom: -60%;
    left: 50%;

    & .tooltip
    {
      opacity: 0;
    }
  }

  
  .info-btn-wrapper:hover .tooltip
  {
    opacity: 1;
  }


  /*New*/

  .search-container {
            position: relative;
            display: flex;
            align-items: center;
        }

  .size-calculator {
            position: absolute;
            top: -9999px;
            left: -9999px;
            white-space: pre;
            padding: 10px 10px 10px 38px;
            font-size: 16px;
            font-family: Arial, sans-serif;
        }

        .clear-button {
            position: absolute;
            right: 12px;
            width: 16px;
            height: 16px;
            color: #666;
            cursor: pointer;
            display: none;
        }



</style>


</head>

  
<body class="encBG">
  <div class="bg-icon"></div>

  <div class="app-content-wrapper">

  <div class="grid-wrapper">
    <div class="grid-header">
      <div class="grid-toolbar">
        <div class="left">


          <div class="input-wrapper">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input type="text" class="search-input" placeholder="Search...">
            <svg class="clear-button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
            </svg>
            <div class="size-calculator"></div>
        </div>


          <div class="info-btn-wrapper">
          <button class="circle small tertiary">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.4921 8.91012C10.4497 8.67687 10.2456 8.49999 10.0001 8.49999C9.72397 8.49999 9.50011 8.72385 9.50011 8.99999V13.5021L9.50817 13.592C9.55051 13.8253 9.75465 14.0021 10.0001 14.0021C10.2763 14.0021 10.5001 13.7783 10.5001 13.5021V8.99999L10.4921 8.91012ZM10.7988 6.74999C10.7988 6.33578 10.463 5.99999 10.0488 5.99999C9.63461 5.99999 9.29883 6.33578 9.29883 6.74999C9.29883 7.16421 9.63461 7.49999 10.0488 7.49999C10.463 7.49999 10.7988 7.16421 10.7988 6.74999ZM18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10ZM3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10Z"/>
              </svg>              
          </button>
          <div class="tooltip-wrapper">
            <div class="tooltip top">
              Search Input:<br>Searches these properties:
              <ul>
                <li>Property Label A</li>
                <li>Property Label B</li>
                <li>Property Label C</li>
              </ul>
            </div>
          </div>
        </div>

        </div>
        <div class="right"></div>
      </div>
      <div class="grid-header-columns">
        <div class="header-column">Column</div>
        <div class="header-column">Column</div>
        <div class="header-column">Column</div>
        <div class="header-column">Column</div>
      </div>
    </div>
    <div class="grid-cells">Grid Cells</div>
  </div>

  </div>

  <script>
    const searchInput = document.querySelector('.search-input');
    const sizeCalculator = document.querySelector('.size-calculator');
    const clearButton = document.querySelector('.clear-button');
    const minWidth = 220;
    const maxWidth = 400;
    const padding = 30; // Accounting for padding and both icons
    
    // Pre-calculate sizing for the placeholder text to avoid bounce
    window.addEventListener('DOMContentLoaded', () => {
        // Set initial width based on placeholder
        sizeCalculator.textContent = searchInput.placeholder;
        const placeholderWidth = Math.max(minWidth, sizeCalculator.clientWidth + padding);
        searchInput.style.width = `${placeholderWidth}px`;
    });

    // Function to update input width based on text content
    function updateInputWidth() {
        // Get current input value
        const value = searchInput.value || searchInput.placeholder;
        
        // Set the content of the hidden div to the input value
        sizeCalculator.textContent = value;
        
        // Calculate the width needed
        let contentWidth = sizeCalculator.clientWidth;
        let newWidth = Math.max(minWidth, contentWidth + padding);
        
        // Constrain within max
        newWidth = Math.min(newWidth, maxWidth);
        
        // Set the new width only if it's different from current to avoid reflow
        const currentWidth = parseInt(window.getComputedStyle(searchInput).width);
        if (Math.abs(currentWidth - newWidth) > 3) { // Small threshold to avoid minor adjustments
            searchInput.style.width = `${newWidth}px`;
        }
        
        // Show/hide clear button based on input content
        clearButton.style.display = searchInput.value ? 'block' : 'none';
    }

    // Clear the input when clear button is clicked
    clearButton.addEventListener('click', function() {
        searchInput.value = '';
        updateInputWidth();
        searchInput.focus();
    });

    // Update width on input
    searchInput.addEventListener('input', updateInputWidth);
    
    // Initial width update (after layout)
    setTimeout(updateInputWidth, 0);
</script>

</body>

</html>